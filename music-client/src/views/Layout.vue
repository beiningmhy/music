<template>
    <div>
        <el-container>
            <el-aside width="200px">
                <div style="height: 60px; color: white; display: flex; align-items: center; justify-content: center"
                    @click="$route.path == '/' ? '' : $router.push('/')">
                    <img src="@/assets/images/logo1.png" alt="" style="width: 40px; height: 40px">
                    <span class="logo-title" style="color: black;">music</span>
                </div>
                <div>
                    <!-- 用户头像部分 -->
                    <div>
                        <div style="height: 80px;width: 80px;margin:0 auto;margin-top: 20px;">
                            <el-image v-if="user != ''" style="width: 80px; height: 80px; border-radius: 10%;"
                                :src="'http://localhost:8080/api/files/' + user.userAvatar"
                                :preview-src-list="['http://localhost:8080/api/files/' + user.userAvatar]">
                            </el-image>
                            <!-- <el-image v-else style="width: 100px; height: 100px; border-radius: 10%;margin-top: 10px;"
                            src="../assets/images/logo1.png"
                            :preview-src-list="['http://localhost:8080/api/files/' + item.userAvatar]">
                        </el-image> -->
                            <img v-else style="width: 100%; height: 100%; border-radius: 10%;"
                                src="@/assets/images/logo1.png" alt="">
                        </div>
                        <div>
                            <div v-if="user != ''">{{ user.userName }}</div>
                            <div v-else style="margin-top: 10px;">点击登录</div>
                        </div>
                    </div>
                    <!-- 菜单部分 -->
                    <div style="display: flex;flex-direction: column;width: 80%;margin:  0 auto;margin-top: 20px;">
                        <div style="height: 40px;line-height: 40px;display: flex;margin-top: 5px;" class="menu-item" @click="clickTag('/')">
                            <div style="height: 40px;margin-top: 5px;">
                                <svg t="1730735590148" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="3624" width="30" height="30">
                                    <path
                                        d="M765.5168 538.88a31.488 31.488 0 0 0-31.5136 31.5136v211.072l0.0768 0.8448c0.0768 1.2032 0.256 2.3552 0.5632 3.584a14.2592 14.2592 0 0 1-0.512 5.0944l-0.256 0.0768a29.952 29.952 0 0 1-7.3728 0.768l-134.0416-0.0256-0.8448-142.08c2.176-17.9968-1.024-38.9632-14.4896-55.168-10.0864-12.1088-25.1904-19.8144-45.2864-19.8144h-54.7072c-20.0704 0-35.2 7.68-45.2864 19.8144l-3.1488 4.0448c-10.8032 15.2064-13.2864 34.0224-11.2896 51.8656l-0.896 140.9024h-134.4768c-4.864 0-7.9616-0.768-8.0384-0.8192 0.2048 0.1792-0.256-3.2256 0.0256-5.3248a14.2336 14.2336 0 0 0 0.4608-3.2l0.0512-2.2016v-208.9984a31.488 31.488 0 0 0-31.5136-31.488 31.488 31.488 0 0 0-31.5136 31.488V773.12c-2.6112 16.896 0.6912 37.248 14.0288 53.4016 11.8272 14.464 30.208 23.3984 56.064 23.3984h165.4784c15.2832 0 31.5136-12.2368 31.5136-22.528l0.896-176.1024-0.0512-4.6336a14.72 14.72 0 0 0-0.7168-4.736l0.2048-4.1472h48.6656c0.2048 1.9456 0.2816 4.0192 0.128 5.5296l-0.2048 0.512c-0.256 0.896-0.256 2.8928-0.256 13.1328l0.8704 170.4704c0 10.2656 16.256 22.528 31.5136 22.528h165.504c25.5488 0 43.6736-8.96 55.9872-23.3472 13.4144-16.2304 16.7168-36.5824 14.0288-54.4256l1.8688-201.728a31.488 31.488 0 0 0-31.5136-31.5648z"
                                        fill="#2c2c2c" p-id="3625"></path>
                                    <path
                                        d="M510.4896 171.5712c-31.9488-0.896-62.336 12.5952-89.856 39.808l-18.7904 19.6352L129.5104 519.2192c-11.9296 12.5184-11.4176 32.6144 0.896 44.928 4.8384 4.864 11.2896 7.7056 18.432 8.448l4.48 0.1536c7.2192 0 14.1824-2.7904 19.712-7.68l2.4832-2.4576 285.184-302.208c16.4352-17.28 32.3328-25.7536 46.7456-25.344 9.2672 0.1536 18.2528 3.7888 26.7008 9.8048 2.9184 2.0736 5.5552 4.3008 7.936 6.6048l1.92 1.8944 2.6112 2.688 285.5168 306.5856c6.4 6.4 14.7456 10.112 23.0912 10.112 8.1408 0 15.9744-2.9952 21.5552-8.6016 12.7232-12.16 13.7472-31.8208 1.9968-44.7232L593.9456 213.0688a134.8352 134.8352 0 0 0-26.368-22.4c-15.2832-10.0352-32.0256-16.64-50.1504-18.5856l-6.912-0.512z"
                                        fill="#2c2c2c" p-id="3626"></path>
                                </svg>
                            </div>
                            <div style="margin-left: 10px;">
                                <span>首页</span>
                            </div>
                        </div>
                        <div style="height: 40px;line-height: 40px;display: flex;margin-top: 5px;" class="menu-item" @click="clickTag('/singer')">
                            <div style="height: 40px;margin-top: 5px;">
                                <svg t="1730736206940" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="5578" width="30" height="30">
                                    <path
                                        d="M526.496 749.888l88.544-77.408c9.888-8.672 15.68-21.088 16.672-35.872 1.888-27.52-13.088-62.336-39.968-93.056-41.216-47.104-96.576-64.928-124.64-40.32l-88.576 77.408c-9.408 8.192-23.616 27.488-13.312 64.672 0.512 1.792 1.344 3.648 1.92 5.472l-83.808 95.552c-8.48 9.664-8.48 24.064-0.032 33.728l1.28 1.472-4.128 3.52C269.76 794.24 268.48 810.4 277.696 821.12c5.088 5.92 12.224 8.96 19.456 8.96 5.888 0 11.808-2.016 16.64-6.112l4.672-4c5.024 5.312 11.744 8.256 18.624 8.256 4.928 0 9.888-1.408 14.208-4.32l58.432-39.168 1.728 146.496c0 14.144 11.488 25.6 25.6 25.6 14.144 0 25.6-11.456 25.6-25.6l-1.728-177.184c11.136 4.736 22.08 7.68 32.096 7.68C506.016 761.728 517.568 757.632 526.496 749.888zM500.544 542.528c8.64 0 30.528 9.408 52.64 34.656 24.672 28.192 29.312 52.576 28.16 56.672l-23.072 20.288-80.384-91.936L500.544 542.528zM341.504 768.832l-4.864-5.6 56.576-64.512c2.784 3.648 5.504 7.328 8.608 10.848 3.52 4.032 7.168 7.872 10.912 11.52L341.504 768.832zM440.384 675.872c-24.704-28.192-29.312-52.576-28.16-56.672l26.944-23.392 80.608 92.16-25.536 22.464c0 0-0.384 0.096-1.216 0.096C484.384 710.528 462.432 701.152 440.384 675.872z"
                                        p-id="5579" fill="#2c2c2c"></path>
                                    <path
                                        d="M888 837.088c-1.76-15.136-3.296-42.176-4.8-68.288-1.664-29.344-3.392-59.68-5.728-77.664-5.088-39.616-12.512-86.24-29.184-132-10.848-29.824-31.648-46.528-48.512-57.728-21.184-14.144-57.952-25.568-68.992-28.8-3.712-1.088-25.536-7.456-30.88-9.44-23.808-9.056-46.304-17.6-58.784-34.656-9.408-12.832-14.4-36.032 30.784-102.528 13.152-19.36 12.096-40.608 11.296-57.696l-0.32-7.232c-0.192-9.952-5.632-17.984-6.496-19.2-0.512-0.736-1.024-1.408-1.6-2.144l-0.16-11.168c-0.16-16.096-0.352-32.768-2.592-49.856-8.992-68.8-50.944-114.144-118.208-127.648-31.2-6.272-62.208-5.6-92 2.048-60.032 15.328-97.472 54.88-108.224 114.4-1.728 9.44-2.464 18.976-3.136 28.48-0.48 6.432-0.928 12.832-1.856 19.168s-0.8 12.544-0.512 18.816c0.352 7.712 0.352 10.592-1.632 14.112-13.6 23.68-10.24 58.4 7.968 82.528 5.248 6.976 8.8 15.136 12.928 24.576l3.04 6.88c4.096 9.056 8.8 17.92 13.888 26.496 7.616 12.736 4.608 34.592-6.08 44.064-19.168 17.088-43.328 28.736-78.24 37.76-22.336 5.792-42.592 14.752-63.776 24.128-32.64 14.432-53.984 39.616-65.248 77.024-20.096 66.976-27.872 171.232-33.536 247.36l-1.696 22.4c-1.28 16.704 6.016 29.696 21.696 38.592 26.24 14.912 54.112 27.232 82.912 36.64 42.88 14.016 89.184 24.352 137.28 31.232l0-52.16c-42.496-6.368-83.584-15.36-121.376-27.712-23.616-7.712-46.528-17.664-68.896-29.952l1.248-15.328c5.504-73.792 12.992-174.816 31.52-236.448 6.944-23.136 17.952-36.544 38.528-45.632 18.496-8.192 36-15.936 54.24-20.672 42.624-11.008 74.208-26.592 99.456-49.056 29.088-25.856 36.32-74.528 16.064-108.512-4.096-6.912-7.904-14.08-11.232-21.376l-2.784-6.304c-4.736-10.848-10.112-23.104-18.944-34.88-6.688-8.832-7.136-21.632-4.512-26.208 9.568-16.64 8.896-31.904 8.416-41.984-0.128-3.008-0.448-5.984 0.032-9.056 1.088-7.552 1.632-15.2 2.208-22.88 0.544-7.68 1.056-15.392 2.432-23.04 7.2-39.968 29.632-63.456 70.528-73.92 22.304-5.696 45.44-6.176 69.248-1.44 45.984 9.248 71.36 36.768 77.536 84.128 1.824 14.048 1.984 28.448 2.144 43.712l0.192 14.688c0.256 12.064 4.736 19.808 8.32 24.512l0.096 2.496c0.544 10.944 1.024 21.28-2.496 26.464-35.264 51.872-66.368 111.616-29.728 161.536 21.44 29.248 53.568 41.472 82.528 52.48 4.96 1.888 29.792 9.248 34.272 10.56 19.136 5.6 43.488 14.656 54.816 22.208 16 10.624 24.032 19.776 28.704 32.608 14.944 41.056 21.824 84.224 26.56 121.024 2.048 16.16 3.744 45.568 5.344 74.016 1.44 25.248 2.816 49.248 4.544 66.272-45.152 24.448-96.288 41.824-156.096 53.12-59.968 11.328-123.936 15.808-187.456 14.368l0 51.36c6.592 0.128 13.088 0.736 19.712 0.736 60.8 0 120.416-5.44 177.248-16.128 67.008-12.64 124.416-32.544 175.424-60.832C886.976 868.576 889.6 850.304 888 837.088z"
                                        p-id="5580" fill="#2c2c2c"></path>
                                </svg>
                            </div>
                            <div style="margin-left: 10px;">
                                <span>歌手</span>
                            </div>
                        </div>
                        <div style="height: 40px;line-height: 40px;display: flex;margin-top: 5px;" class="menu-item">
                            <div style="height: 40px;margin-top: 5px;">
                                <svg t="1730736249960" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="6634" width="30" height="30">
                                    <path
                                        d="M964.608 234.496c-46.08-52.565333-104.789333-93.696-169.642667-118.784a34.030933 34.030933 0 0 0-46.421333 31.744v420.352a178.005333 178.005333 0 0 0-110.933333-38.741333c-98.816 0-179.2 80.384-179.2 179.2S538.794667 887.466667 637.610667 887.466667s179.2-80.384 179.2-179.2c0-1.877333-0.170667-3.754667-0.341334-5.632 0-1.024 0.341333-1.877333 0.341334-2.901334V201.216c36.181333 20.309333 69.12 46.933333 96.597333 78.165333 12.458667 14.165333 34.133333 15.530667 48.128 3.072 14.165333-12.288 15.530667-33.792 3.072-47.957333zM637.610667 819.2c-61.098667 0-110.933333-49.834667-110.933334-110.933333s49.834667-110.933333 110.933334-110.933334 110.933333 49.834667 110.933333 110.933334-49.834667 110.933333-110.933333 110.933333zM185.344 307.2h392.533333c18.773333 0 34.133333-15.36 34.133334-34.133333s-15.36-34.133333-34.133334-34.133334h-392.533333a34.133333 34.133333 0 1 0 0 68.266667zM424.277333 460.8h-238.933333c-18.773333 0-34.133333 15.36-34.133333 34.133333s15.36 34.133333 34.133333 34.133334h238.933333c18.773333 0 34.133333-15.36 34.133334-34.133334s-15.36-34.133333-34.133334-34.133333zM321.877333 682.666667h-136.533333c-18.773333 0-34.133333 15.36-34.133333 34.133333s15.36 34.133333 34.133333 34.133333h136.533333c18.773333 0 34.133333-15.36 34.133334-34.133333s-15.36-34.133333-34.133334-34.133333z"
                                        fill="#2c2c2c" p-id="6635"></path>
                                </svg>
                            </div>
                            <div style="margin-left: 10px;">
                                <span>歌单</span>
                            </div>
                        </div>

                    </div>

                </div>
            </el-aside>
            <el-container>
                <el-header>
                    <!-- 头部 -->
                    <div style="display: flex;flex-direction: row;">
                        <div @click="$router.go(-1)"
                            style="background-color: rgba(200, 200, 200,0.5);width: 40px;border-radius: 50%;height: 40px;line-height: 40px;margin-top: 10px; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);">
                            <i class="el-icon-arrow-left"></i>
                        </div>
                        <div @click="$router.go(1)"
                            style="background-color: rgba(200, 200, 200,0.5);width: 40px;border-radius: 50%;height: 40px;line-height: 40px;margin-top: 10px;margin-left: 10px; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);">
                            <i class="el-icon-arrow-right"></i>
                        </div>
                        <div
                            style="display: flex;flex-direction: row;margin-left: 50px;height: 40px;line-height: 40px;margin-top: 10px;">
                            <!-- 目录 -->
                            <div @click="clickTag('/')"
                                style="margin-left: 30px; background-color:rgba(200, 200, 200,0.2) ;box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);border-radius: 40%;width: 60px;">
                                首页
                            </div>
                            <div @click="clickTag('/singer')"
                                style="margin-left: 30px; background-color:rgba(200, 200, 200,0.2) ;box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);border-radius: 40%;width: 60px;">
                                歌手
                            </div>
                            <div
                                style="margin-left: 30px; background-color:rgba(200, 200, 200,0.2) ;box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);border-radius: 40%;width: 60px;">
                                歌单
                            </div>
                        </div>
                        <div v-if="isNameVisible" class="singer-name">{{ singer.name }}</div>
                    </div>



                </el-header>
                <el-main>
                    <!-- <el-backtop target=".main" :visibility-height="10"></el-backtop> -->
                    <router-view class="main"></router-view>
                </el-main>
            </el-container>
        </el-container>
    </div>
</template>
<script>
export default {
    name: 'Layout',
    data() {
        return {
            isNameVisible: false,
            observer: null,
            user: localStorage.getItem("user") ? JSON.parse(localStorage.getItem("user")) : '',
        }
    },
    // props: {
    //     singer: {
    //         type: Object,
    //         required: true
    //     }
    // },
    // mounted() {
    //     this.initIntersectionObserver();
    // },
    // beforeDestroy() {
    //     this.observer.disconnect();
    // },
    methods: {
        clickTag(path) {
            if (path === this.$route.path) {
                return;
            } else {
                this.$router.push(path);
            }
        },
        initIntersectionObserver() {
            const targetElement = document.querySelector('.singer-name-target');

            if (!targetElement) {
                console.error('Target element not found');
                return;
            }

            this.observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach(entry => {
                        this.isNameVisible = entry.isIntersecting;
                    });
                },
                { threshold: 0.1 }
            );

            this.observer.observe(targetElement);
        },
    }
}
</script>
<style scoped>
.el-header {
    /* background-color: rgba(240, 240, 240, 0.5); */
    color: #333;
    text-align: center;
    line-height: 60px;


}

.el-aside {
    background-color: rgb(232, 233, 237, 0.5);
    color: #6b6b6b;
    text-align: center;
    /* line-height: 200px; */
    min-height: 100vh;
    box-shadow: 5px 0px 10px rgba(0, 0, 0, 0.3);
    border-radius: 5%;
}

/* .el-main {
    background-color: rgba(180, 176, 176, 0.158);
    

} */
.menu-item:hover {
    background-color: rgba(231, 230, 230, 0.734);
    border-radius: 5%;
}
</style>